{
  "total_queries": 7,
  "skipped_rate": 0.0,
  "avg_context_length": 112,
  "avg_confidence_score": 0.0495,
  "details": [
    {
      "case": {
        "id": "triv_1",
        "query": "What is 2 + 2?",
        "type": "trivial"
      },
      "policy": {
        "decision": "retrieve",
        "query_type": "general_knowledge",
        "parameters": {
          "mode": "hybrid",
          "max_chunks": 3,
          "filters": null
        },
        "reason": "General query detected, verifying with internal knowledge base.",
        "suggested_rewrite": null
      },
      "loop": {
        "results": [
          {
            "id": "rag_test_0000_81a5f666",
            "content": "RAG combines retrieval with generation for grounded AI responses. It uses vector embeddings for semantic search.",
            "score": 0.0,
            "metadata": {
              "char_count": 112,
              "word_count": 16
            }
          }
        ],
        "trace": [
          {
            "step": 1,
            "strategy": "hybrid (k=3)",
            "retrieved": 1,
            "top_score": 0.0,
            "confident": false
          },
          {
            "step": 2,
            "strategy": "dense (k=8)",
            "retrieved": 1,
            "top_score": 0.0,
            "confident": false
          },
          {
            "step": 3,
            "strategy": "hybrid (k=13)",
            "retrieved": 1,
            "top_score": 0.0,
            "confident": false
          }
        ],
        "final_status": {
          "success": false,
          "reason": "Max iterations reached without high confidence",
          "iterations": 3
        }
      }
    },
    {
      "case": {
        "id": "triv_2",
        "query": "Hello there",
        "type": "trivial"
      },
      "policy": {
        "decision": "retrieve",
        "query_type": "doc_specific",
        "parameters": {
          "mode": "hybrid",
          "max_chunks": 5,
          "filters": null
        },
        "reason": "Specific document query, standard retrieval.",
        "suggested_rewrite": null
      },
      "loop": {
        "results": [
          {
            "id": "rag_test_0000_81a5f666",
            "content": "RAG combines retrieval with generation for grounded AI responses. It uses vector embeddings for semantic search.",
            "score": 0.0,
            "metadata": {
              "char_count": 112,
              "word_count": 16
            }
          }
        ],
        "trace": [
          {
            "step": 1,
            "strategy": "hybrid (k=5)",
            "retrieved": 1,
            "top_score": 0.0,
            "confident": false
          },
          {
            "step": 2,
            "strategy": "dense (k=10)",
            "retrieved": 1,
            "top_score": 0.0,
            "confident": false
          },
          {
            "step": 3,
            "strategy": "hybrid (k=15)",
            "retrieved": 1,
            "top_score": 0.0,
            "confident": false
          }
        ],
        "final_status": {
          "success": false,
          "reason": "Max iterations reached without high confidence",
          "iterations": 3
        }
      }
    },
    {
      "case": {
        "id": "spec_1",
        "query": "Summarize the Q3 financial report",
        "type": "doc_specific"
      },
      "policy": {
        "decision": "retrieve",
        "query_type": "doc_specific",
        "parameters": {
          "mode": "hybrid",
          "max_chunks": 5,
          "filters": null
        },
        "reason": "Specific document query, standard retrieval.",
        "suggested_rewrite": null
      },
      "loop": {
        "results": [
          {
            "id": "rag_test_0000_81a5f666",
            "content": "RAG combines retrieval with generation for grounded AI responses. It uses vector embeddings for semantic search.",
            "score": 0.0,
            "metadata": {
              "char_count": 112,
              "word_count": 16
            }
          }
        ],
        "trace": [
          {
            "step": 1,
            "strategy": "hybrid (k=5)",
            "retrieved": 1,
            "top_score": 0.0,
            "confident": false
          },
          {
            "step": 2,
            "strategy": "dense (k=10)",
            "retrieved": 1,
            "top_score": 0.0,
            "confident": false
          },
          {
            "step": 3,
            "strategy": "hybrid (k=15)",
            "retrieved": 1,
            "top_score": 0.0,
            "confident": false
          }
        ],
        "final_status": {
          "success": false,
          "reason": "Max iterations reached without high confidence",
          "iterations": 3
        }
      }
    },
    {
      "case": {
        "id": "spec_2",
        "query": "What are the terms of the SLA?",
        "type": "doc_specific"
      },
      "policy": {
        "decision": "retrieve",
        "query_type": "doc_specific",
        "parameters": {
          "mode": "hybrid",
          "max_chunks": 5,
          "filters": null
        },
        "reason": "Specific document query, standard retrieval.",
        "suggested_rewrite": null
      },
      "loop": {
        "results": [
          {
            "id": "rag_test_0000_81a5f666",
            "content": "RAG combines retrieval with generation for grounded AI responses. It uses vector embeddings for semantic search.",
            "score": 0.0,
            "metadata": {
              "char_count": 112,
              "word_count": 16
            }
          }
        ],
        "trace": [
          {
            "step": 1,
            "strategy": "hybrid (k=5)",
            "retrieved": 1,
            "top_score": 0.0,
            "confident": false
          },
          {
            "step": 2,
            "strategy": "dense (k=10)",
            "retrieved": 1,
            "top_score": 0.0,
            "confident": false
          },
          {
            "step": 3,
            "strategy": "hybrid (k=15)",
            "retrieved": 1,
            "top_score": 0.0,
            "confident": false
          }
        ],
        "final_status": {
          "success": false,
          "reason": "Max iterations reached without high confidence",
          "iterations": 3
        }
      }
    },
    {
      "case": {
        "id": "cross_1",
        "query": "Compare the security policies across all projects",
        "type": "cross_doc"
      },
      "policy": {
        "decision": "retrieve",
        "query_type": "comparison",
        "parameters": {
          "mode": "hybrid",
          "max_chunks": 8,
          "filters": null
        },
        "reason": "Comparison query, retrieving more chunks to cover both subjects.",
        "suggested_rewrite": null
      },
      "loop": {
        "results": [
          {
            "id": "rag_test_0000_81a5f666",
            "content": "RAG combines retrieval with generation for grounded AI responses. It uses vector embeddings for semantic search.",
            "score": 0.0,
            "metadata": {
              "char_count": 112,
              "word_count": 16
            }
          }
        ],
        "trace": [
          {
            "step": 1,
            "strategy": "hybrid (k=8)",
            "retrieved": 1,
            "top_score": 0.0,
            "confident": false
          },
          {
            "step": 2,
            "strategy": "dense (k=13)",
            "retrieved": 1,
            "top_score": 0.0,
            "confident": false
          },
          {
            "step": 3,
            "strategy": "hybrid (k=18)",
            "retrieved": 1,
            "top_score": 0.0,
            "confident": false
          }
        ],
        "final_status": {
          "success": false,
          "reason": "Max iterations reached without high confidence",
          "iterations": 3
        }
      }
    },
    {
      "case": {
        "id": "cross_2",
        "query": "List all authors mentioned in the documentation",
        "type": "cross_doc"
      },
      "policy": {
        "decision": "retrieve",
        "query_type": "multi_doc",
        "parameters": {
          "mode": "dense",
          "max_chunks": 10,
          "filters": null
        },
        "reason": "Multi-document query, high retrieval depth initiated.",
        "suggested_rewrite": null
      },
      "loop": {
        "results": [
          {
            "id": "rag_test_0000_81a5f666",
            "content": "RAG combines retrieval with generation for grounded AI responses. It uses vector embeddings for semantic search.",
            "score": 0.0,
            "metadata": {
              "char_count": 112,
              "word_count": 16
            }
          }
        ],
        "trace": [
          {
            "step": 1,
            "strategy": "dense (k=10)",
            "retrieved": 1,
            "top_score": 0.0,
            "confident": false
          },
          {
            "step": 2,
            "strategy": "dense (k=15)",
            "retrieved": 1,
            "top_score": 0.0,
            "confident": false
          },
          {
            "step": 3,
            "strategy": "hybrid (k=20)",
            "retrieved": 1,
            "top_score": 0.0,
            "confident": false
          }
        ],
        "final_status": {
          "success": false,
          "reason": "Max iterations reached without high confidence",
          "iterations": 3
        }
      }
    },
    {
      "case": {
        "id": "gen_1",
        "query": "Explain the concept of RAG",
        "type": "general"
      },
      "policy": {
        "decision": "retrieve",
        "query_type": "general_knowledge",
        "parameters": {
          "mode": "hybrid",
          "max_chunks": 3,
          "filters": null
        },
        "reason": "General query detected, verifying with internal knowledge base.",
        "suggested_rewrite": null
      },
      "loop": {
        "results": [
          {
            "id": "rag_test_0000_81a5f666",
            "content": "RAG combines retrieval with generation for grounded AI responses. It uses vector embeddings for semantic search.",
            "score": 0.940500020980835,
            "metadata": {
              "char_count": 112,
              "word_count": 16
            }
          }
        ],
        "trace": [
          {
            "step": 1,
            "strategy": "hybrid (k=3)",
            "retrieved": 1,
            "top_score": 0.9405,
            "confident": true
          }
        ],
        "final_status": {
          "success": true,
          "reason": "High confidence achieved",
          "iterations": 1
        }
      }
    }
  ]
}